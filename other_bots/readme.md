# Telegram Bot на C++ с использованием Red-Black Tree

## Описание проекта
Этот проект представляет собой Telegram-бота, реализованного на C++ с использованием библиотеки [tgbot-cpp](https://github.com/reo7sp/tgbot-cpp). Бот поддерживает базовые команды, а также работу с **красно-черным деревом** для выполнения запросов **range queries** (запросов диапазона).

Бот умеет:
- Отвечать на команды `/start`, `/help`, `/Hi`, `/range_queries`
- Добавлять элементы в **красно-черное дерево**
- Выполнять **поиск количества элементов** в заданном диапазоне

## Требования
Перед сборкой и запуском бота убедитесь, что на вашей системе установлены:
- **Ubuntu (или другая ОС с поддержкой Docker)**
- **CMake**
- **g++ (C++17)**
- **libboost-all-dev**
- **libssl-dev**
- **libcurl4-openssl-dev**
- **Git**
- **Docker**

## Установка и сборка проекта
### **1. Клонирование репозитория**
```sh
git clone https://github.com/your-repo/telegram-bot.git
cd telegram-bot
```

### **2. Сборка через CMake**
```sh
mkdir build && cd build
cmake ..
make -j$(nproc)
```

### **3. Запуск бота**
```sh
./tg_bot.x
```

## **Запуск через Docker**
### **1. Сборка Docker-образа**
```sh
docker build -t telegram-bot .
```

### **2. Запуск контейнера с ботом**
```sh
docker run -d --name telegram-bot telegram-bot
```

### **3. Проверка логов бота**
```sh
docker logs telegram-bot
```

### **4. Остановка и удаление контейнера**
```sh
docker stop telegram-bot
docker rm telegram-bot
```

## **Структура проекта**
```sh
telegram-bot/
├── src/
│   ├── tg_bot.hpp   # Основной код бота
│   ├── main.cpp    # Точка входа в программу
├── include/
│   ├── red_black_tree.hpp   # Реализация красно-черного дерева
├── Dockerfile  # Конфигурация для Docker
├── CMakeLists.txt  # Файл конфигурации CMake
├── README.md  # Документация проекта
```

## **Описание кода**
### **1. Основной класс `tg_bot`**
Этот класс отвечает за взаимодействие с Telegram API и содержит обработчики команд:
- `/start` — приветственное сообщение
- `/help` — список доступных команд
- `/Hi` — отвечает "Привет!"
- `/range_queries` — позволяет выполнять операции с деревом

### **2. Реализация Красно-Черного Дерева (`red_black_tree.hpp`)**
Этот модуль реализует **красно-черное дерево** с поддержкой операций:
- **Вставка элемента** (`insert_elem`)
- **Поиск количества элементов в диапазоне** (`range_queries`)
- **Фиксация нарушений свойств дерева после вставки** (`fix_insert`)
- **Левый и правый повороты** (`left_rotate`, `right_rotate`)

### **3. Класс `range_quries`**
Этот класс предоставляет интерфейс для работы с красно-черным деревом в различных режимах:
- **Консольный режим** (`Mode::cin`)
- **Чтение из файла** (`Mode::file`)
- **Бот (`Mode::bot`)**

## **Примеры работы**
### **Добавление элемента**
1. Отправляем команду `/range_queries`
2. Вводим `k` (режим добавления числа)
3. Вводим число (например, `15`)

Бот ответит:
```
Число добавлено: 15
```

### **Поиск в диапазоне**
1. Отправляем команду `/range_queries`
2. Вводим `q` (режим поиска диапазона)
3. Вводим левую границу (например, `10`)
4. Вводим правую границу (например, `20`)

Бот ответит:
```
Диапазон: [10, 20]
Результат: 3
```
